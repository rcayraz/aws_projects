vision general sobre ELB

¿es una balanceo de carga?
. lo load balancers son servidores que reenvian trafico a varios servidore (por ejemplo instancias ec2 en sentido descendente )

```
Usuario 1 ---|
             |
Usuario 2 ---|----> Elastic Load Balancer ----> EC2 Instancia 1
             |             (ELB)          |
Usuario 3 ---|                            |----> EC2 Instancia 2
                                          |
                                          |----> EC2 Instancia 3
```

por que utilizar ?

- repartir la carga entre varias instancias
- exponer un unico punto dns a tu app
- manejar sin problemas los fallos de las instancias desendentes
- realizar comprobacion periodicas de la salud en tus intancias
- proporcionar terminacion ssl (https) para tus sitios web
- imponer adherencia con las cookies 
- alta disponibilidad entre zonas 
- separar el trafico publico del privado

¿ por vamos utlizar u elastic load balancer ?
- es un equilibrador de cargas gestionado
- aws garantiza su funcionamineto 
- aws se encarga de sus actulizaciones , mentenimiento , etc

cuesta poco condifurar tu propio balanceador de cargas , y te supondra una mejora en disponilidad y escablidad

Controles de salud 
-son cruciales para los load balancer
permiten saber si las instancias que reenvian el trafico estan disponibles para respones 
- se realiza en un puerto y ruta (/heat es comun)
- si la comprobacion falla , la instancia se considera no apta, y el trafico no se enviara a ella

```
                   comprobación de salud
                   (healthcheck)
                   HTTP GET /health
                          |
                          v
Elastic Load Balancer -----------> EC2 Instancia 1 (✓)
      (ELB)           |
                      |----------> EC2 Instancia 2 (✓)
                      |
                      |----------> EC2 Instancia 3 (✗)
                                   (No recibe tráfico)
```

- las comprobaciones de salud se realizan en una ruta configurada (por ejemplo: /health)
- el ELB solo envía tráfico a instancias "saludables"
- ELB detecta instancias en mal estado y redirecciona el tráfico automáticamente


TIPOS DE LOAD BALANCERS 

aws tiene 4 tipos
 - classic load balancer (v1 . antigua generacion ) 2009
                    (HTTP , HTTPS , TCP,SSL , TCP SEGURO)
 - application load balancer (v2- nueva generacion ) 2016
                    HTTP , HTTPS , web socket
 - nertwork load balancer ( v2 nueva generacion) - 2017
                    TCP , UDP
 - gateway load balancer (2020)
        funciona en la capa 3 (capa      red)     PROTOCOLO IP

* en general se recomienda utilizar los load balancer de nueva generacion , ya que ofercen mas funciones.
* algunos load balancer puede configurarse como ELB internos (privados) o externos (publicos)

GRUPOS DE SEGURIFDAD


## GRUPOS DE SEGURIDAD

Los grupos de seguridad controlan el tráfico entre usuarios, balanceadores de carga y las instancias EC2.

```
                                     Grupo de Seguridad 1           Grupo de Seguridad 2
                                     (Permite HTTP/HTTPS)           (Solo permite tráfico
                                                                    desde el ELB)
                                     ┌───────────────────┐          ┌───────────────────┐
                                     │                   │          │                   │
Usuarios ──── HTTP/HTTPS ────────────►   Load Balancer   │──── HTTP ────────────────────► EC2 Instancias
                                     │       (ELB)       │   restringido               │
                                     │                   │                             │
                                     └───────────────────┘          └───────────────────┘
```

### Beneficios de este enfoque:

- Las instancias EC2 no reciben tráfico directo de internet
- El balanceador de carga reenvía solo el tráfico necesario
- Solo se exponen los puertos necesarios (ej. HTTP 80, HTTPS 443)
- Las EC2 solo aceptan tráfico proveniente del balanceador de carga
- Mayor seguridad al aislar las instancias de acceso directo
- Posibilidad de aplicar reglas de tráfico específicas en cada capa


## Tablas de Grupos de Seguridad

### Grupo de Seguridad 1: Balanceador de Carga (ELB)

#### Reglas de Entrada (Inbound)

| Tipo | Protocolo | Puerto | Origen | Descripción |
|------|-----------|--------|--------|-------------|
| HTTP | TCP | 80 | 0.0.0.0/0 | Permite tráfico HTTP desde Internet |
| HTTPS | TCP | 443 | 0.0.0.0/0 | Permite tráfico HTTPS desde Internet |

#### Reglas de Salida (Outbound)

| Tipo | Protocolo | Puerto | Destino | Descripción |
|------|-----------|--------|---------|-------------|
| HTTP | TCP | 80 | sg-123abc (Grupo de Seguridad 2) | Tráfico HTTP hacia las instancias EC2 |
| HTTPS | TCP | 443 | sg-123abc (Grupo de Seguridad 2) | Tráfico HTTPS hacia las instancias EC2 |

### Grupo de Seguridad 2: Instancias EC2

#### Reglas de Entrada (Inbound)

| Tipo | Protocolo | Puerto | Origen | Descripción |
|------|-----------|--------|--------|-------------|
| HTTP | TCP | 80 | sg-456def (Grupo de Seguridad 1) | Solo permite tráfico HTTP desde el ELB |
| HTTPS | TCP | 443 | sg-456def (Grupo de Seguridad 1) | Solo permite tráfico HTTPS desde el ELB |

#### Reglas de Salida (Outbound)

| Tipo | Protocolo | Puerto | Destino | Descripción |
|------|-----------|--------|---------|-------------|
| Todo el tráfico | Todos | Todos | 0.0.0.0/0 | Permite todo el tráfico saliente |

> **Nota**: Esta configuración de grupos de seguridad implementa el principio de defensa en profundidad, donde las instancias EC2 están protegidas de acceso directo desde Internet, permitiendo únicamente el tráfico que pasa a través del balanceador de carga.



